# ServiceX_frontend
 Client access library for ServiceX

# Introduction

Given you have a selection string, this library will manage submitting it to a ServiceX instance and retreiving the data locally for you.
The selection string is often generated by another front-end library, for example:

- lib1
- lib2

# Prerequisits

Before you install this library you'll need:

- An environment based on python 3.7 or later
- A ServiceX end-point. For example, `http://localhost:5000/servicex`.

# Usage

The following lines will return a `pandas.DataFrame` containing all the jet pT's from an ATLAS xAOD file containing Z->ee Monte Carlo:

```
blah
```

If your query is badly formed or there is an other problem with the backend, an exception will be thrown.

If you'd like to be able to submit multiple queries and have them run on the ServiceX back end in parallel, it may be best to use the `asyncio` interface:

```
blah
```

# Features

Implemented:

- Accepts a `qastle` formatted query
- Exceptions are used to report back errors of all sorts from the service to the user's code.
- Data is return as a `pandas.DataFrame`
- Complete returned data must fit in the process' memory

Comming:

- Data is returned as an `awkward` array, or a list of ROOT files located in a specified directory
- Support up to 100 simultanious queries from a laptop-like front end without overwhelming the local machine (hopefully ServiceX will be overwhelmed!)
- Make it easy to submit the same query for 100 different datasets
- Run in an async or a non-async environment and non-async methods will accomodate automatically.

# Testing

This code has been tested in several environments:

- Linux, Windows, MacOS
- Python 3.7
- Jupyter Notebooks, regular python command-line invoked source files

# Development

For any changes please feel free to submit pull requests!

To do development please setup your environment with the following steps:

1. A python 3.7 development environment
1. Pull down this package, XXX
1. `python -m pip install -e .[test]`
1. Run the tests to make sure everything is good: `pytest`.

Then add tests as you develop. When you are done, submit a pull request with any required changes to the documentation and the online tests will run.
